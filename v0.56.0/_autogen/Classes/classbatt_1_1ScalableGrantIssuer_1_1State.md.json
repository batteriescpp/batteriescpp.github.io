{
  "abstract": false,
  "anchor": "",
  "brief": "Implements the common mechanisms shared by Issuer and Grant. ",
  "category": "classes",
  "const": false,
  "definition": "",
  "explicit": false,
  "fullname": "batt::ScalableGrantIssuer::State",
  "hasAdditionalMembers": false,
  "hasDetails": false,
  "inline": false,
  "kind": "class",
  "language": "cpp",
  "location": {
    "bodyEnd": 207,
    "bodyFile": "batteries/async/scalable_grant.hpp",
    "bodyStart": 132,
    "column": 5,
    "file": "batteries/async/scalable_grant.hpp",
    "line": 131
  },
  "name": "batt::ScalableGrantIssuer::State",
  "override": false,
  "parent": {
    "anchor": "",
    "brief": "A pool from which [ScalableGrant]() instances are allocated. ",
    "category": "classes",
    "fullname": "batt::ScalableGrantIssuer",
    "kind": "class",
    "language": "cpp",
    "name": "batt::ScalableGrantIssuer",
    "refid": "classbatt_1_1ScalableGrantIssuer",
    "summary": "A pool from which ScalableGrant instances are allocated. ",
    "title": "batt::ScalableGrantIssuer",
    "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer/",
    "visibility": "public"
  },
  "parentBreadcrumbs": [
    {
      "anchor": "",
      "category": "namespaces",
      "fullname": "batt",
      "kind": "namespace",
      "language": "cpp",
      "name": "batt",
      "refid": "namespacebatt",
      "title": "batt",
      "url": "/_autogen/Namespaces/namespacebatt/",
      "visibility": "public"
    },
    {
      "anchor": "",
      "brief": "A pool from which [ScalableGrant]() instances are allocated. ",
      "category": "classes",
      "fullname": "batt::ScalableGrantIssuer",
      "kind": "class",
      "language": "cpp",
      "name": "batt::ScalableGrantIssuer",
      "refid": "classbatt_1_1ScalableGrantIssuer",
      "summary": "A pool from which ScalableGrant instances are allocated. ",
      "title": "batt::ScalableGrantIssuer",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer/",
      "visibility": "public"
    }
  ],
  "privateAttributes": [
    {
      "abstract": false,
      "anchor": "#variable-mutex-",
      "category": "attributes",
      "const": false,
      "definition": "std::mutex batt::ScalableGrantIssuer::State::mutex_",
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::mutex_",
      "hasDetails": false,
      "inline": false,
      "kind": "variable",
      "language": "cpp",
      "location": {
        "bodyFile": "batteries/async/scalable_grant.hpp",
        "bodyStart": 204,
        "column": 28,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 204
      },
      "name": "mutex_",
      "override": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a6927a53b2b352fb65618d9ebcb9f7f96",
      "static": false,
      "strong": false,
      "title": "mutex_",
      "type": "std::mutex",
      "typePlain": "std::mutex",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#variable-mutex-",
      "visibility": "private"
    },
    {
      "abstract": false,
      "anchor": "#variable-waiters-",
      "category": "attributes",
      "const": false,
      "definition": "ConsumerList batt::ScalableGrantIssuer::State::waiters_",
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::waiters_",
      "hasDetails": false,
      "inline": false,
      "kind": "variable",
      "language": "cpp",
      "location": {
        "bodyFile": "batteries/async/scalable_grant.hpp",
        "bodyStart": 205,
        "column": 22,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 205
      },
      "name": "waiters_",
      "override": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a375d819c18b9cfe2187a675a6c3717e3",
      "static": false,
      "strong": false,
      "title": "waiters_",
      "type": "ConsumerList",
      "typePlain": "ConsumerList",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#variable-waiters-",
      "visibility": "private"
    },
    {
      "abstract": false,
      "anchor": "#variable-closed-",
      "category": "attributes",
      "const": false,
      "definition": "bool batt::ScalableGrantIssuer::State::closed_",
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::closed_",
      "hasDetails": false,
      "inline": false,
      "kind": "variable",
      "language": "cpp",
      "location": {
        "bodyFile": "batteries/async/scalable_grant.hpp",
        "bodyStart": 206,
        "column": 14,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 206
      },
      "name": "closed_",
      "override": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1aecc477bde43420bd126064cd3b4e98dc",
      "static": false,
      "strong": false,
      "title": "closed_",
      "type": "bool",
      "typePlain": "bool",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#variable-closed-",
      "visibility": "private"
    }
  ],
  "publicAttributes": [
    {
      "abstract": false,
      "anchor": "#variable-count",
      "brief": "The count held by this State. ",
      "category": "attributes",
      "const": false,
      "definition": "std::atomic<u64> batt::ScalableGrantIssuer::State::count",
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::count",
      "hasDetails": false,
      "inline": false,
      "kind": "variable",
      "language": "cpp",
      "location": {
        "bodyFile": "batteries/async/scalable_grant.hpp",
        "bodyStart": 136,
        "column": 21,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 136
      },
      "name": "count",
      "override": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1af885a15bb4ffe294ade77ca6f4834852",
      "static": false,
      "strong": false,
      "summary": "The count held by this State. ",
      "title": "count",
      "type": "std::atomic< u64 >",
      "typePlain": "std::atomic< u64 >",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#variable-count",
      "visibility": "public"
    }
  ],
  "publicFunctions": [
    {
      "abstract": false,
      "anchor": "#function-wake-all",
      "argsString": "(Issuer *issuer, ConsumerList &to_wake, Status status)",
      "brief": "Consumes the passed `to_wake` list, resolving each handler with a freshly issued grant (if `status` is ok), or the passed error status. ",
      "category": "functions",
      "const": false,
      "default": false,
      "definition": "void batt::ScalableGrantIssuer::State::wake_all",
      "deleted": false,
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::wake_all",
      "hasDetails": false,
      "inline": true,
      "kind": "function",
      "language": "cpp",
      "location": {
        "bodyEnd": 101,
        "bodyFile": "batteries/async/scalable_grant_impl.hpp",
        "bodyStart": 88,
        "column": 21,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 143
      },
      "name": "wake_all",
      "override": false,
      "params": [
        {
          "name": "issuer",
          "type": "[Issuer](/_autogen/Classes/classbatt_1_1ScalableGrantIssuer/) *",
          "typePlain": "Issuer *"
        },
        {
          "name": "to_wake",
          "type": "ConsumerList &",
          "typePlain": "ConsumerList &"
        },
        {
          "name": "status",
          "type": "[Status](/_autogen/Classes/classbatt_1_1Status/)",
          "typePlain": "Status"
        }
      ],
      "pureVirtual": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a2ebda658333c39ea4fec1f4296eb451f",
      "static": true,
      "strong": false,
      "summary": "Consumes the passed to_wake list, resolving each handler with a freshly issued grant (if status is ok), or the passed error status. ",
      "title": "wake_all",
      "type": "void",
      "typePlain": "void",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#function-wake-all",
      "virtual": false,
      "visibility": "public"
    },
    {
      "abstract": false,
      "anchor": "#function-state",
      "argsString": "(u64 init_count) noexcept",
      "brief": "Create a new State with the specified initial count. ",
      "category": "functions",
      "const": false,
      "default": false,
      "definition": "batt::ScalableGrantIssuer::State::State",
      "deleted": false,
      "explicit": true,
      "fullname": "batt::ScalableGrantIssuer::State::State",
      "hasDetails": false,
      "inline": true,
      "kind": "function",
      "language": "cpp",
      "location": {
        "bodyEnd": 74,
        "bodyFile": "batteries/async/scalable_grant_impl.hpp",
        "bodyStart": 68,
        "column": 18,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 149
      },
      "name": "State",
      "override": false,
      "params": [
        {
          "name": "init_count",
          "type": "u64",
          "typePlain": "u64"
        }
      ],
      "pureVirtual": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a9ce165c4e790f181f8b45f9fd33dfab0",
      "static": false,
      "strong": false,
      "summary": "Create a new State with the specified initial count. ",
      "title": "State",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#function-state",
      "virtual": false,
      "visibility": "public"
    },
    {
      "abstract": false,
      "anchor": "#function-state",
      "argsString": "(State &&that) noexcept",
      "brief": "Transfers all waiters and count from `that` to newly created State. ",
      "category": "functions",
      "const": false,
      "default": false,
      "definition": "batt::ScalableGrantIssuer::State::State",
      "deleted": false,
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::State",
      "hasDetails": false,
      "inline": true,
      "kind": "function",
      "language": "cpp",
      "location": {
        "bodyEnd": 84,
        "bodyFile": "batteries/async/scalable_grant_impl.hpp",
        "bodyStart": 78,
        "column": 9,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 153
      },
      "name": "State",
      "override": false,
      "params": [
        {
          "name": "that",
          "type": "State &&",
          "typePlain": "State &&"
        }
      ],
      "pureVirtual": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a4965f286afc9113860089b825edfa48e",
      "static": false,
      "strong": false,
      "summary": "Transfers all waiters and count from that to newly created State. ",
      "title": "State",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#function-state",
      "virtual": false,
      "visibility": "public"
    },
    {
      "abstract": false,
      "anchor": "#function-acquire",
      "argsString": "(Issuer *issuer, u64 n, WaitForResource wait_for_resource) noexcept",
      "brief": "Transfer `n` count to the caller, possibly blocking (if `wait_for_resource` is true). ",
      "category": "functions",
      "const": false,
      "default": false,
      "definition": "StatusOr< ScalableGrant > batt::ScalableGrantIssuer::State::acquire",
      "deleted": false,
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::acquire",
      "hasDetails": false,
      "inline": true,
      "kind": "function",
      "language": "cpp",
      "location": {
        "bodyEnd": 123,
        "bodyFile": "batteries/async/scalable_grant_impl.hpp",
        "bodyStart": 105,
        "column": 18,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 159
      },
      "name": "acquire",
      "override": false,
      "params": [
        {
          "name": "issuer",
          "type": "[Issuer](/_autogen/Classes/classbatt_1_1ScalableGrantIssuer/) *",
          "typePlain": "Issuer *"
        },
        {
          "name": "n",
          "type": "u64",
          "typePlain": "u64"
        },
        {
          "name": "wait_for_resource",
          "type": "WaitForResource",
          "typePlain": "WaitForResource"
        }
      ],
      "pureVirtual": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a600f62f68e21f0ce05442d510c89e93b",
      "static": false,
      "strong": false,
      "summary": "Transfer n count to the caller, possibly blocking (if wait_for_resource is true). ",
      "title": "acquire",
      "type": "[StatusOr](/_autogen/Classes/classbatt_1_1StatusOr/)< [ScalableGrant](/_autogen/Classes/classbatt_1_1ScalableGrant/) >",
      "typePlain": "StatusOr< ScalableGrant >",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#function-acquire",
      "virtual": false,
      "visibility": "public"
    },
    {
      "abstract": false,
      "anchor": "#function-try-acquire",
      "argsString": "(u64 n) noexcept",
      "brief": "Attempt a fast, non-blocking acquisition of count from this State; returns true iff `n` was successfully subtracted from this State's count. ",
      "category": "functions",
      "const": false,
      "default": false,
      "definition": "bool batt::ScalableGrantIssuer::State::try_acquire",
      "deleted": false,
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::try_acquire",
      "hasDetails": false,
      "inline": true,
      "kind": "function",
      "language": "cpp",
      "location": {
        "bodyEnd": 138,
        "bodyFile": "batteries/async/scalable_grant_impl.hpp",
        "bodyStart": 127,
        "column": 14,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 164
      },
      "name": "try_acquire",
      "override": false,
      "params": [
        {
          "name": "n",
          "type": "u64",
          "typePlain": "u64"
        }
      ],
      "pureVirtual": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a12362b6c29811a498882d5335fe136a5",
      "static": false,
      "strong": false,
      "summary": "Attempt a fast, non-blocking acquisition of count from this State; returns true iff n was successfully subtracted from this State's count. ",
      "title": "try_acquire",
      "type": "bool",
      "typePlain": "bool",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#function-try-acquire",
      "virtual": false,
      "visibility": "public"
    },
    {
      "abstract": false,
      "anchor": "#function-async-acquire",
      "argsString": "(Issuer *issuer, u64 n, HandlerFn &&handler) noexcept",
      "brief": "Invokes `handler` as soon as `n` count can be granted. ",
      "category": "functions",
      "const": false,
      "default": false,
      "definition": "void batt::ScalableGrantIssuer::State::async_acquire",
      "deleted": false,
      "details": "May invoke `handler` before returning. ",
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::async_acquire",
      "hasDetails": true,
      "inline": false,
      "kind": "function",
      "language": "cpp",
      "location": {
        "bodyEnd": 413,
        "bodyFile": "batteries/async/scalable_grant.hpp",
        "bodyStart": 379,
        "column": 14,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 170
      },
      "name": "async_acquire",
      "override": false,
      "params": [
        {
          "name": "issuer",
          "type": "[Issuer](/_autogen/Classes/classbatt_1_1ScalableGrantIssuer/) *",
          "typePlain": "Issuer *"
        },
        {
          "name": "n",
          "type": "u64",
          "typePlain": "u64"
        },
        {
          "name": "handler",
          "type": "HandlerFn &&",
          "typePlain": "HandlerFn &&"
        }
      ],
      "pureVirtual": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a8cf1f9b90b84534dafc44ebd786012df",
      "static": false,
      "strong": false,
      "summary": "Invokes handler as soon as n count can be granted. ",
      "templateParams": [
        {
          "defval": "void([StatusOr](/_autogen/Classes/classbatt_1_1StatusOr/)<[ScalableGrant](/_autogen/Classes/classbatt_1_1ScalableGrant/)>)",
          "defvalPlain": "void(StatusOr<ScalableGrant>)",
          "name": "",
          "type": "typename HandlerFn",
          "typePlain": "typename HandlerFn"
        }
      ],
      "title": "async_acquire",
      "type": "void",
      "typePlain": "void",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#function-async-acquire",
      "virtual": false,
      "visibility": "public"
    },
    {
      "abstract": false,
      "anchor": "#function-release",
      "argsString": "(u64 n) noexcept",
      "brief": "Increases the count of this State by `n`, returning a list of consumers whose handlers can be invoked (success case). ",
      "category": "functions",
      "const": false,
      "default": false,
      "definition": "auto batt::ScalableGrantIssuer::State::release",
      "deleted": false,
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::release",
      "hasDetails": false,
      "inline": true,
      "kind": "function",
      "language": "cpp",
      "location": {
        "bodyEnd": 171,
        "bodyFile": "batteries/async/scalable_grant_impl.hpp",
        "bodyStart": 142,
        "column": 25,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 175
      },
      "name": "release",
      "override": false,
      "params": [
        {
          "name": "n",
          "type": "u64",
          "typePlain": "u64"
        }
      ],
      "pureVirtual": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a5b07e358ca394ee59c580df1bf95ccbb",
      "static": false,
      "strong": false,
      "summary": "Increases the count of this State by n, returning a list of consumers whose handlers can be invoked (success case). ",
      "title": "release",
      "type": "ConsumerList",
      "typePlain": "ConsumerList",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#function-release",
      "virtual": false,
      "visibility": "public"
    },
    {
      "abstract": false,
      "anchor": "#function-close",
      "argsString": "() noexcept",
      "brief": "Closes this State, unblocking any current waiters and preventing any future waiters from blocking. ",
      "category": "functions",
      "const": false,
      "default": false,
      "definition": "auto batt::ScalableGrantIssuer::State::close",
      "deleted": false,
      "details": "The returned list of waiters should be resolved with StatusCode::kClosed or some more appropriate error status. ",
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::close",
      "hasDetails": true,
      "inline": true,
      "kind": "function",
      "language": "cpp",
      "location": {
        "bodyEnd": 185,
        "bodyFile": "batteries/async/scalable_grant_impl.hpp",
        "bodyStart": 175,
        "column": 25,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 181
      },
      "name": "close",
      "override": false,
      "params": [],
      "pureVirtual": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a5c43a08823372138b58ea98dd62f9588",
      "static": false,
      "strong": false,
      "summary": "Closes this State, unblocking any current waiters and preventing any future waiters from blocking. ",
      "title": "close",
      "type": "ConsumerList",
      "typePlain": "ConsumerList",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#function-close",
      "virtual": false,
      "visibility": "public"
    },
    {
      "abstract": false,
      "anchor": "#function-get-count",
      "argsString": "() const noexcept",
      "brief": "Returns the current count. ",
      "category": "functions",
      "const": true,
      "default": false,
      "definition": "u64 batt::ScalableGrantIssuer::State::get_count",
      "deleted": false,
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::get_count",
      "hasDetails": false,
      "inline": true,
      "kind": "function",
      "language": "cpp",
      "location": {
        "bodyEnd": 188,
        "bodyFile": "batteries/async/scalable_grant.hpp",
        "bodyStart": 185,
        "column": 13,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 185
      },
      "name": "get_count",
      "override": false,
      "params": [],
      "pureVirtual": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a6c2777d9d409ce07b21ea52d97d489c6",
      "static": false,
      "strong": false,
      "summary": "Returns the current count. ",
      "title": "get_count",
      "type": "u64",
      "typePlain": "u64",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#function-get-count",
      "virtual": false,
      "visibility": "public"
    },
    {
      "abstract": false,
      "anchor": "#function-is-closed",
      "argsString": "() const noexcept",
      "brief": "Returns true iff this State is closed, meaning that it can't be waited on. ",
      "category": "functions",
      "const": true,
      "default": false,
      "definition": "bool batt::ScalableGrantIssuer::State::is_closed",
      "deleted": false,
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::is_closed",
      "hasDetails": false,
      "inline": true,
      "kind": "function",
      "language": "cpp",
      "location": {
        "bodyEnd": 196,
        "bodyFile": "batteries/async/scalable_grant.hpp",
        "bodyStart": 192,
        "column": 14,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 192
      },
      "name": "is_closed",
      "override": false,
      "params": [],
      "pureVirtual": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1a04a459819465772dcfa8fe8d2f24cf4b",
      "static": false,
      "strong": false,
      "summary": "Returns true iff this State is closed, meaning that it can't be waited on. ",
      "title": "is_closed",
      "type": "bool",
      "typePlain": "bool",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#function-is-closed",
      "virtual": false,
      "visibility": "public"
    },
    {
      "abstract": false,
      "anchor": "#function-swap",
      "argsString": "(State &that) noexcept",
      "brief": "Swap this State with `that`. ",
      "category": "functions",
      "const": false,
      "default": false,
      "definition": "void batt::ScalableGrantIssuer::State::swap",
      "deleted": false,
      "explicit": false,
      "fullname": "batt::ScalableGrantIssuer::State::swap",
      "hasDetails": false,
      "inline": true,
      "kind": "function",
      "language": "cpp",
      "location": {
        "bodyEnd": 205,
        "bodyFile": "batteries/async/scalable_grant_impl.hpp",
        "bodyStart": 189,
        "column": 14,
        "file": "batteries/async/scalable_grant.hpp",
        "line": 200
      },
      "name": "swap",
      "override": false,
      "params": [
        {
          "name": "that",
          "type": "State &",
          "typePlain": "State &"
        }
      ],
      "pureVirtual": false,
      "refid": "classbatt_1_1ScalableGrantIssuer_1_1State_1aabf04f169f4bb3bee98f36a45c58202d",
      "static": false,
      "strong": false,
      "summary": "Swap this State with that. ",
      "title": "swap",
      "type": "void",
      "typePlain": "void",
      "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/#function-swap",
      "virtual": false,
      "visibility": "public"
    }
  ],
  "refid": "classbatt_1_1ScalableGrantIssuer_1_1State",
  "static": false,
  "strong": false,
  "summary": "Implements the common mechanisms shared by Issuer and Grant. ",
  "title": "batt::ScalableGrantIssuer::State",
  "url": "/_autogen/Classes/classbatt_1_1ScalableGrantIssuer_1_1State/",
  "visibility": "private"
}